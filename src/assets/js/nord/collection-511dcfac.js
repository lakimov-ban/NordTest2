import{T as e}from"./query-assigned-elements-92ce7494.js";import{e as t,i as s,t as n}from"./directive-e9ce14b4.js";import{m as r,f as o,c as l,p as i,a as u}from"./ref-99418ab4.js";
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const c=(e,t,s)=>{const n=new Map;for(let r=t;r<=s;r++)n.set(e[r],r);return n},f=t(class extends s{constructor(e){if(super(e),e.type!==n.CHILD)throw Error("repeat() can only be used in text expressions")}ct(e,t,s){let n;void 0===s?s=t:void 0!==t&&(n=t);const r=[],o=[];let l=0;for(const t of e)r[l]=n?n(t,l):l,o[l]=s(t,l),l++;return{values:o,keys:r}}render(e,t,s){return this.ct(e,t,s).values}update(t,[s,n,f]){var a;const h=r(t),{values:p,keys:d}=this.ct(s,n,f);if(!Array.isArray(h))return this.ut=d,p;const v=null!==(a=this.ut)&&void 0!==a?a:this.ut=[],m=[];let g,y,x=0,b=h.length-1,j=0,w=p.length-1;for(;x<=b&&j<=w;)if(null===h[x])x++;else if(null===h[b])b--;else if(v[x]===d[j])m[j]=o(h[x],p[j]),x++,j++;else if(v[b]===d[w])m[w]=o(h[b],p[w]),b--,w--;else if(v[x]===d[w])m[w]=o(h[x],p[w]),l(t,m[w+1],h[x]),x++,w--;else if(v[b]===d[j])m[j]=o(h[b],p[j]),l(t,h[x],h[b]),b--,j++;else if(void 0===g&&(g=c(d,j,w),y=c(v,x,b)),g.has(v[x]))if(g.has(v[b])){const e=y.get(d[j]),s=void 0!==e?h[e]:null;if(null===s){const e=l(t,h[x]);o(e,p[j]),m[j]=e}else m[j]=o(s,p[j]),l(t,h[x],s),h[e]=null;j++}else i(h[b]),b--;else i(h[x]),x++;for(;j<=w;){const e=l(t,m[w+1]);o(e,p[j]),m[j++]=e}for(;x<=b;){const e=h[x++];null!==e&&i(e)}return this.ut=d,u(t,m),e}});function a(e,t){var s;const n=new Map;for(const r of e){const e=r[t],o=null!==(s=n.get(e))&&void 0!==s?s:[];n.has(e)||n.set(e,[]),o.push(r),n.set(e,o)}return n}function h(e,t){const s=[];for(let n=0;n<e.length;n+=t)s.push(e.slice(n,n+t));return s}function p(e,t,s){return e.map(((n,r)=>{const o=(r+t)%e.length;return s(e[o],o)}))}export{h as a,f as c,a as g,p as m};
//# sourceMappingURL=collection-511dcfac.js.map
